"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6171],{5318:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(7378);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=a.createContext({}),c=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(i.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},g=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,i=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(n),g=o,h=u["".concat(i,".").concat(g)]||u[g]||m[g]||r;return n?a.createElement(h,s(s({ref:t},p),{},{components:n})):a.createElement(h,s({ref:t},p))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,s=new Array(r);s[0]=g;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l[u]="string"==typeof e?e:o,s[1]=l;for(var c=2;c<r;c++)s[c]=n[c];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}g.displayName="MDXCreateElement"},5376:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>s,default:()=>m,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var a=n(5773),o=(n(7378),n(5318));const r={hide_table_of_contents:!0},s="Custom Agent, using LLMs",l={unversionedId:"modules/agents/agents/examples/custom_agent_llm",id:"modules/agents/agents/examples/custom_agent_llm",title:"Custom Agent, using LLMs",description:"The first way to create a custom agent is to use an existing Agent class, but use a custom LLMChain. This is the simplest way to create a custom Agent. It is highly reccomended that you work with the ZeroShotAgent, as at the moment that is by far the most generalizable one.",source:"@site/docs/modules/agents/agents/examples/custom_agent_llm.md",sourceDirName:"modules/agents/agents/examples",slug:"/modules/agents/agents/examples/custom_agent_llm",permalink:"/langchainjs/docs/modules/agents/agents/examples/custom_agent_llm",draft:!1,editUrl:"https://github.com/hwchase17/langchainjs/docs/modules/agents/agents/examples/custom_agent_llm.md",tags:[],version:"current",frontMatter:{hide_table_of_contents:!0},sidebar:"sidebar",previous:{title:"Custom Agent, using Chat Models",permalink:"/langchainjs/docs/modules/agents/agents/examples/custom_agent_chat"},next:{title:"Agent Executors",permalink:"/langchainjs/docs/modules/agents/executor/"}},i={},c=[],p={toc:c},u="wrapper";function m(e){let{components:t,...n}=e;return(0,o.kt)(u,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"custom-agent-using-llms"},"Custom Agent, using LLMs"),(0,o.kt)("p",null,"The first way to create a custom agent is to use an existing Agent class, but use a custom LLMChain. This is the simplest way to create a custom Agent. It is highly reccomended that you work with the ZeroShotAgent, as at the moment that is by far the most generalizable one."),(0,o.kt)("p",null,"Most of the work in creating the custom LLMChain comes down to the prompt. Because we are using an existing agent class to parse the output, it is very important that the prompt say to produce text in that format. Additionally, we currently require an agent_scratchpad input variable to put notes on previous actions and observations. This should almost always be the final part of the prompt. However, besides those instructions, you can customize the prompt as you wish."),(0,o.kt)("p",null,"To ensure that the prompt contains the appropriate instructions, we will utilize a helper method on that class. The helper method for the ZeroShotAgent takes the following arguments:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"tools: List of tools the agent will have access to, used to format the prompt."),(0,o.kt)("li",{parentName:"ul"},"prefix: String to put before the list of tools."),(0,o.kt)("li",{parentName:"ul"},"suffix: String to put after the list of tools."),(0,o.kt)("li",{parentName:"ul"},"input_variables: List of input variables the final prompt will expect.")),(0,o.kt)("p",null,"For this exercise, we will give our agent access to Google Search and a Calcuator, and we will customize it in that we will have it answer as a pirate."),(0,o.kt)("p",null,"First, let's import what we need."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},'import { OpenAI } from "langchain/llms";\nimport { ZeroShotAgent, AgentExecutor } from "langchain/agents";\nimport { SerpAPI, Calculator } from "langchain/tools";\nimport { LLMChain } from "langchain/chains";\n')),(0,o.kt)("p",null,"Next, let's initialize a model and the tools we want."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"const model = new OpenAI({ temperature: 0 });\nconst tools = [new SerpAPI(), new Calculator()];\n")),(0,o.kt)("p",null,"Now, let's create the custom prompt."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},'const prefix = `Answer the following questions as best you can, but speaking as a pirate might speak. You have access to the following tools:`;\nconst suffix = `Begin! Remember to speak as a pirate when giving your final answer. Use lots of "Args"\n\nQuestion: {input}\n{agent_scratchpad}`;\n\nconst createPromptArgs = {\n  suffix,\n  prefix,\n  inputVariables: ["input", "agent_scratchpad"],\n};\n\nconst prompt = ZeroShotAgent.createPrompt(tools, createPromptArgs);\n\nconsole.log(prompt.template);\n')),(0,o.kt)("p",null,"Now, lets create an LLMChain with that custom prompt."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"const llmChain = new LLMChain({ llm: model, prompt });\n")),(0,o.kt)("p",null,"Now we create an agent and agent executor with that custom prompt."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},'const agent = new ZeroShotAgent({\n  llmChain: llmChain,\n  allowedTools: ["search", "calculator"],\n});\nconst agentExecutor = AgentExecutor.fromAgentAndTools({ agent, tools });\nconsole.log("Loaded agent.");\n')),(0,o.kt)("p",null,"Now we can run the agent!"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},'const input = `Who is Olivia Wilde\'s boyfriend? What is his current age raised to the 0.23 power?`;\n\nconsole.log(`Executing with input "${input}"...`);\n\nconst result = await agentExecutor.call({ input });\n\nconsole.log(`Got output ${result.output}`);\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"Got output Arrr, Jason Sudeikis be 47 years old raised to the 0.23 power be 2.4242784855673896.\n")))}m.isMDXComponent=!0}}]);